(function(){"use strict";var t={5536:function(t,e,o){var i={};o.r(i),o.d(i,{getTodo:function(){return D},updateMenu:function(){return L}});var s={};o.r(s),o.d(s,{getTodoList:function(){return $}});var n=o(6369),a=function(){var t=this,e=t._self._c;return e("div",[e("router-view")],1)},d=[],r={name:"App"},c=r,l=o(1001),u=(0,l.Z)(c,a,d,!1,null,null,null),p=u.exports,m=(o(7658),o(70)),h=o(4294),v=o.n(h),f=o(7634),k=o.n(f);let g=[];const y=[1,2,3];for(let dt=1;dt<=y.length;dt++)g.push(k().mock({id:k().Random.guid(),title:k().Random.first(),isDelete:!1,locked:k().Random.boolean(),record:y.map((()=>({text:k().Random.cparagraph(2),isDelete:!1,checked:k().Random.boolean()})))}));var w={start(){let t=new(v())(m["default"]);t.onGet("/todo/list").reply((t=>{let e=g.map((t=>({id:t.id,title:t.title,count:t.record.filter((t=>!1===t.checked)).length,locked:t.locked,isDelete:t.isDelete}))).filter((t=>!0!==t.isDelete));return new Promise(((t,o)=>{setTimeout((()=>{t([200,{todos:e}])}),200)}))})),t.onPost("/todo/addTodo").reply((t=>(g.push({id:k().Random.guid(),title:"newList",isDelete:!1,locked:!1,record:[]}),new Promise(((t,e)=>{setTimeout((()=>{t([200])}),200)}))))),t.onGet("/todo/listId").reply((t=>{let{id:e}=t.params,o=g.find((t=>e&&t.id===e));return o&&(o.count=o?o.record.filter((t=>!1===t.checked)).length:null),new Promise(((t,e)=>{setTimeout((()=>{t([200,{todo:o}])}),200)}))})),t.onPost("/todo/addRecord").reply((t=>{let{id:e,text:o}=JSON.parse(t.data);return g.some(((t,i)=>{if(t.id===e)return t.record.push({text:o,isDelete:!1,checked:!1}),!0})),new Promise(((t,e)=>{setTimeout((()=>{t([200])}),200)}))})),t.onPost("/todo/editTodo").reply((t=>{let{todo:e}=JSON.parse(t.data);return g.some(((t,o)=>{if(t.id===e.id)return t.title=e.title,t.locked=e.locked,t.isDelete=e.isDelete,!0})),new Promise(((t,e)=>{setTimeout((()=>{t([200])}),200)}))})),t.onPost("/todo/editRecord").reply((t=>{let{id:e,record:o,index:i}=JSON.parse(t.data);return g.some((t=>{if(t.id===e)return t.record[i]=o,!0})),new Promise(((t,e)=>{setTimeout((()=>{t([200])}),200)}))}))}},x=w,C=o(3822);const T=t=>m["default"].get("/todo/list",{params:t}),_=t=>m["default"].post("/todo/addTodo",t).then((t=>t.data)),b=t=>m["default"].get("/todo/listId",{params:t}),O=t=>m["default"].post("/todo/addRecord",t).then((t=>t.data)),P=t=>m["default"].post("/todo/editTodo",t).then((t=>t.data)),M=t=>m["default"].post("/todo/editRecord",t).then((t=>t.data)),D=({commit:t})=>new Promise((e=>{T().then((o=>{t("EDITTODE",o.data.todos),e()}))})),L=({commit:t})=>{t("MENUOPEN")},$=t=>t.todoList;n.ZP.use(C.ZP);const N={EDITTODE(t,e){t.todoList=e},MENUOPEN(t){t.menuOpen=!t.menuOpen}},U={todoList:[],menuOpen:!1};var Z=new C.ZP.Store({mutations:N,state:U,actions:i,getters:s}),E=o(2631),I=function(){var t=this,e=t._self._c;return e("section",{staticClass:"container",class:{"menu-open":t.menuOpen}},[e("section",{staticClass:"menu"},[e("TodoMenus")],1),e("div",{staticClass:"content-overlay",on:{click:function(e){return t.$store.dispatch("updateMenu")}}}),e("div",{staticClass:"content-container"},[e("router-view")],1)])},R=[],j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-todos"},[t._l(t.todoList,(function(o,i){return e("a",{key:i,staticClass:"list-todo activeListClass list",class:{active:o.id===t.todoId},on:{click:function(e){return t.goList(o.id)}}},[o.locked?e("span",{staticClass:"icon-lock"}):t._e(),o.count>0?e("span",{staticClass:"count-list"},[t._v(t._s(o.count))]):t._e(),t._v(" "+t._s(o.title)+" ")])})),e("a",{staticClass:"link-list-new",on:{click:t.addTodoList}},[e("span",{staticClass:"icon-plus"}),t._v(" 新增 ")])],2)},S=[],A={name:"TodoMenus",data(){return{items:[],todoId:""}},computed:{todoList(){return this.$store.getters.getTodoList}},created(){this.$store.dispatch("getTodo").then((()=>{this.$nextTick((()=>{this.goList(this.todoList[0].id)}))}))},methods:{goList(t){this.todoId=t},addTodoList(){_({}).then((t=>{this.$store.dispatch("getTodo").then((()=>{this.$nextTick((()=>{setTimeout((()=>{this.goList(this.todoList[this.todoList.length-1].id)}),100)}))}))}))}},watch:{todoId(t){this.$router.push({name:"todo",params:{id:t}})}}},B=A,J=(0,l.Z)(B,j,S,!1,null,null,null),G=J.exports,F={name:"LayOuts",components:{TodoMenus:G},computed:{menuOpen(){return this.$store.state.menuOpen}}},q=F,z=(0,l.Z)(q,I,R,!1,null,null,null),H=z.exports,K=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:!t.todo.isDelete,expression:"!todo.isDelete"}],staticClass:"page lists-show"},[e("nav",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],staticClass:"form list-edit-form"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.title,expression:"todo.title"}],attrs:{type:"text",disabled:t.todo.locked},domProps:{value:t.todo.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateTitle.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.todo,"title",e.target.value)}}}),e("div",{staticClass:"nav-group right"},[e("a",{staticClass:"nav-item",on:{click:function(e){t.isUpdate=!1}}},[e("span",{staticClass:"icon-close"})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isUpdate,expression:"!isUpdate"}],staticClass:"nav-group",on:{click:function(e){return t.$store.dispatch("updateMenu")}}},[t._m(0)]),e("h1",{directives:[{name:"show",rawName:"v-show",value:!t.isUpdate,expression:"!isUpdate"}],staticClass:"title-page",on:{click:function(e){t.isUpdate=!0}}},[e("span",{staticClass:"title-wrapper"},[t._v(t._s(t.todo.title))]),t._v(" "),e("span",{staticClass:"count-list"},[t._v(t._s(t.todo.count||0))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isUpdate,expression:"!isUpdate"}],staticClass:"nav-group right"},[e("div",{staticClass:"options-web"},[e("a",{staticClass:"nav-item",on:{click:t.onclock}},[t.todo.locked?e("span",{staticClass:"icon-lock"}):e("span",{staticClass:"icon-unlock"})]),e("a",{staticClass:"nav-item"},[e("span",{staticClass:"icon-trash",on:{click:t.onDelete}})])])]),e("div",{staticClass:"form todo-new input-symbol"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",placeholder:"请输入",disabled:t.todo.locked},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onAdd.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}}),e("span",{staticClass:"icon-add"})])]),e("div",{staticClass:"content-scrollable list-items"},t._l(t.items,(function(o,i){return e("div",{key:i},[e("TodoItemBody",{attrs:{item:o,index:i,id:t.todo.id,init:t.init,locked:t.todo.locked}})],1)})),0)])},Q=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"nav-item"},[e("span",{staticClass:"icon-list-unordered"})])}],V=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"slide-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.item.isDelete,expression:"!item.isDelete"}],staticClass:"list-item editingClass editing",class:{checked:t.item.checked}},[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.itemMsg.checked,expression:"itemMsg.checked"}],attrs:{type:"checkbox",name:"checked",disabled:t.locked},domProps:{checked:Array.isArray(t.itemMsg.checked)?t._i(t.itemMsg.checked,null)>-1:t.itemMsg.checked},on:{change:[function(e){var o=t.itemMsg.checked,i=e.target,s=!!i.checked;if(Array.isArray(o)){var n=null,a=t._i(o,n);i.checked?a<0&&t.$set(t.itemMsg,"checked",o.concat([n])):a>-1&&t.$set(t.itemMsg,"checked",o.slice(0,a).concat(o.slice(a+1)))}else t.$set(t.itemMsg,"checked",s)},t.onChange]}}),e("span",{staticClass:"checkbox-custom"})]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.itemMsg.text,expression:"itemMsg.text"}],attrs:{type:"text",placeholder:"写点什么。。。",disabled:t.item.checked||t.locked},domProps:{value:t.itemMsg.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onChange.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.itemMsg,"text",e.target.value)}}}),t.item.checked&&!t.locked?e("a",{staticClass:"delete-item",on:{click:function(e){t.itemMsg.isDelete=!0,t.onChange()}}},[e("span",{staticClass:"icon-trash"})]):t._e()])])},W=[],X={name:"TodoItemBody",data(){return{itemMsg:this.item}},props:{item:{type:Object,default:()=>({checked:!1,text:"你好,世界"})},index:{},id:{},init:{},locked:{}},watch:{item:function(t){this.itemMsg=t}},methods:{onChange(){M({id:this.id,record:this.itemMsg,index:this.index}).then((t=>{this.init(),this.$store.dispatch("getTodo")}))}}},Y=X,tt=(0,l.Z)(Y,V,W,!1,null,null,null),et=tt.exports,ot={name:"TodoItemTop",data(){return{todo:{title:"星期一",count:12,locked:!1},items:[],text:"",isUpdate:!1}},methods:{init(){const t=this.$route.params.id;b({id:t}).then((t=>{let{id:e,title:o,count:i,isDelete:s,locked:n,record:a}=t.data.todo;this.items=a,this.todo={id:e,title:o,count:i,locked:n,isDelete:s}}))},onAdd(){const t=this.$route.params.id;O({id:t,text:this.text}).then((()=>{this.text="",this.init()}))},updateTodo(){let t=this;P({todo:this.todo}).then((e=>{t.$store.dispatch("getTodo")}))},updateTitle(){this.updateTodo(),this.isUpdate=!1},onclock(){this.todo.locked=!this.todo.locked,this.updateTodo()},onDelete(){this.todo.isDelete=!0,this.updateTodo()}},components:{TodoItemBody:et},watch:{"$route.params.id"(){this.init(),this.isUpdate=!1}},created(){this.init()}},it=ot,st=(0,l.Z)(it,K,Q,!1,null,null,null),nt=st.exports;n.ZP.use(E.ZP);var at=new E.ZP({mode:"hash",routes:[{path:"/",name:"LayOuts",component:H,children:[{name:"todo",path:"/todo/:id",component:nt}]}]});x.start(),n.ZP.config.productionTip=!1,new n.ZP({render:t=>t(p),router:at,store:Z}).$mount("#app")}},e={};function o(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,i,s,n){if(!i){var a=1/0;for(l=0;l<t.length;l++){i=t[l][0],s=t[l][1],n=t[l][2];for(var d=!0,r=0;r<i.length;r++)(!1&n||a>=n)&&Object.keys(o.O).every((function(t){return o.O[t](i[r])}))?i.splice(r--,1):(d=!1,n<a&&(a=n));if(d){t.splice(l--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[i,s,n]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,a=i[0],d=i[1],r=i[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(s in d)o.o(d,s)&&(o.m[s]=d[s]);if(r)var l=r(o)}for(e&&e(i);c<a.length;c++)n=a[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(l)},i=self["webpackChunktodomvc"]=self["webpackChunktodomvc"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(5536)}));i=o.O(i)})();
//# sourceMappingURL=app.e7e5ba3b.js.map